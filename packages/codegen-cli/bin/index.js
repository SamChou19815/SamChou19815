#!/usr/bin/env node
module.exports=(()=>{"use strict";var __webpack_modules__={167:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{NB:()=>CodegenRealFilesystem});var fs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(747);var fs__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);var path__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(622);var path__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);var typescript__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(34);var typescript__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(typescript__WEBPACK_IMPORTED_MODULE_2__);class CodegenInMemoryFilesystem{constructor(e){this.files=new Map(e)}fileExists(e){return this.files.has(e)}readFile(e){const t=this.files.get(e);if(t==null)throw new Error(`No such file: ${e}`);return t}writeFile(e,t){this.files.set(e,t)}deleteFile(e){this.files.delete(e)}}const CodegenRealFilesystem={fileExists:e=>(0,fs__WEBPACK_IMPORTED_MODULE_0__.existsSync)(e),readFile:e=>(0,fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync)(e).toString(),writeFile:(e,t)=>{(0,fs__WEBPACK_IMPORTED_MODULE_0__.mkdirSync)((0,path__WEBPACK_IMPORTED_MODULE_1__.dirname)(e),{recursive:true});(0,fs__WEBPACK_IMPORTED_MODULE_0__.writeFileSync)(e,t)},deleteFile:e=>(0,fs__WEBPACK_IMPORTED_MODULE_0__.unlinkSync)(e)};const createJsonCodegenService=(e,t,r)=>({name:e,sourceFileIsRelevant:t,run:(e,t)=>r(e,JSON.parse(t))});const createTypeScriptCodegenService=(name,sourceFileIsRelevant,run)=>({name:name,sourceFileIsRelevant:sourceFileIsRelevant,run:(sourceFilename,source)=>{const transpiledModuleCode=typescript__WEBPACK_IMPORTED_MODULE_2__.transpile(source,{module:typescript__WEBPACK_IMPORTED_MODULE_2__.ModuleKind.CommonJS});const wrappedModuleCodeForEval=`((exports) => {\n      ${transpiledModuleCode}\n\n      return exports.default;\n    })({})`;const evaluatedSource=eval(wrappedModuleCodeForEval);return run(sourceFilename,evaluatedSource)}})},140:(e,t,r)=>{r.r(t);var n=r(622);var o=r(747);var _=r(129);var i=r(282);var c=r.n(i);var s=r(605);var a=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};const u=e=>{const t=[];const r=[];e.trim().split("\n").forEach(e=>{const n=e.trim().split(/\s/).filter(e=>e.trim().length>0);if(n.length===0){return}const o=n[0];if(o==="A"||o==="M"){t.push(n[1])}else if(o==="D"){r.push(n[1])}else if(o.startsWith("R")){r.push(n[1]);t.push(n[2])}});return{changedFiles:t,deletedFiles:r}};const d=e=>new Promise((t,r)=>{s.get(e,e=>{let n="";e.on("data",e=>{n+=e});e.on("end",()=>{try{t(JSON.parse(n))}catch(e){r(e)}})}).on("error",e=>{r(e)})});const l=(e,t=".")=>a(void 0,void 0,void 0,function*(){const r=yield d(`http://localhost:19815/?since=${e}&pathPrefix=${t}`);const n=[];const o=[];r.forEach(({type:e,filename:t})=>{if(e==="changed"){n.push(t)}else{o.push(t)}});return{changedFiles:n,deletedFiles:o}});const p=(e,t=".")=>a(void 0,void 0,void 0,function*(){const r=(e,r)=>{const n=(0,_.spawnSync)("git",["diff",e,...r?[r]:[],"--name-status","--diff-filter=ADRM","--",t]).stdout.toString();return u(n)};if(process.env.CI){return r("HEAD^","HEAD")}try{return yield l(e,t)}catch(e){return r("origin/master")}});const f=p;var v=r(167);const w=()=>{let e=process.cwd();while(e!=="/"){const t=(0,n.join)(e,"package.json");if((0,o.existsSync)(t)&&(0,o.lstatSync)(t).isFile()){const r=JSON.parse((0,o.readFileSync)(t).toString());if(Array.isArray(r.workspaces)){return e}}e=(0,n.dirname)(e)}throw new Error("No root package.json found. Abort!")};const E=()=>{try{process.chdir(w())}catch(e){console.error(e.message);process.exit(1)}};var h=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};const y=e=>h(void 0,void 0,void 0,function*(){const t=(0,o.existsSync)(e.lastestKnownGoodRunTimeFilename)?JSON.parse((0,o.readFileSync)(e.lastestKnownGoodRunTimeFilename).toString()):{};const r=yield e.needRerun(t);const _=yield Promise.all(r.map(r=>h(void 0,void 0,void 0,function*(){return[r,yield e.rerun(r,t)]})));const i=(new Date).getTime();const c=[];_.forEach(([e,r])=>{if(r){t[e]=i}else{c.push(e)}});(0,o.mkdirSync)((0,n.dirname)(e.lastestKnownGoodRunTimeFilename),{recursive:true});(0,o.writeFileSync)(e.lastestKnownGoodRunTimeFilename,JSON.stringify(t,undefined,2));return c});const m=y;var O=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};const M=".codegen/mappings.json";const P=(e,t,r,n)=>{const o=n.fileExists(M)?JSON.parse(n.readFile(M)).mappings:{};t.forEach(e=>{var t;((t=o[e])!==null&&t!==void 0?t:[]).forEach(e=>{if(n.fileExists(e)){n.deleteFile(e)}});delete o[e]});const _=new Set;const i=(e,t)=>e.localeCompare(t);e.forEach(e=>{r.forEach(t=>{if(!t.sourceFileIsRelevant(e)){return}const r=n.readFile(e);const c=t.run(e,r);const s=new Set;c.forEach(({outputFilename:e,outputContent:t})=>{n.writeFile(e,t);_.add(e);s.add(e)});o[e]=Array.from(s).sort(i)})});n.writeFile(M,JSON.stringify({__type__:"@"+"generated",mappings:Object.fromEntries(Object.entries(o).sort(([e],[t])=>i(e,t)))},undefined,2));return Array.from(_).sort(i)};const b=e=>O(void 0,void 0,void 0,function*(){yield m({lastestKnownGoodRunTimeFilename:(0,n.join)(w(),".codegen","cache.json"),needRerun:()=>O(void 0,void 0,void 0,function*(){return["codegen"]}),rerun:(t,r)=>O(void 0,void 0,void 0,function*(){var t;const n=(t=r["codegen"])!==null&&t!==void 0?t:0;const{changedFiles:o,deletedFiles:_}=yield f(n);P(o,_,e,v.NB);return true})})});var g=undefined&&undefined.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})};const D=()=>g(void 0,void 0,void 0,function*(){const e=process.argv[2];if(e==null)throw new Error("No codegen service module path provided!");E();const t=c().createRequire((0,n.join)(w(),"package.json"));const r=t(e);yield b(r)});const S=()=>g(void 0,void 0,void 0,function*(){try{yield D()}catch(e){console.error(e);process.exit(1)}});S()},129:e=>{e.exports=require("child_process")},747:e=>{e.exports=require("fs")},605:e=>{e.exports=require("http")},282:e=>{e.exports=require("module")},622:e=>{e.exports=require("path")},34:e=>{e.exports=require("typescript")}};var __webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e]){return __webpack_module_cache__[e].exports}var t=__webpack_module_cache__[e]={exports:{}};var r=true;try{__webpack_modules__[e](t,t.exports,__webpack_require__);r=false}finally{if(r)delete __webpack_module_cache__[e]}return t.exports}(()=>{__webpack_require__.n=(e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;__webpack_require__.d(t,{a:t});return t})})();(()=>{__webpack_require__.d=((e,t)=>{for(var r in t){if(__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)){Object.defineProperty(e,r,{enumerable:true,get:t[r]})}}})})();(()=>{__webpack_require__.o=((e,t)=>Object.prototype.hasOwnProperty.call(e,t))})();(()=>{__webpack_require__.r=(e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})})})();__webpack_require__.ab=__dirname+"/";return __webpack_require__(140)})();