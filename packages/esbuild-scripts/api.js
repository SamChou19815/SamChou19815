// @generated
/* eslint-disable */
// prettier-ignore
(() => {
var Ge=Object.create,F=Object.defineProperty;var Oe=Object.getOwnPropertyDescriptor;var Ie=Object.getOwnPropertyNames;var Ve=Object.getPrototypeOf,Ue=Object.prototype.hasOwnProperty;var me=e=>F(e,"__esModule",{value:!0});var Je=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),te=(e,t)=>{for(var r in t)F(e,r,{get:t[r],enumerable:!0})},Ye=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Ie(t))!Ue.call(e,n)&&n!=="default"&&F(e,n,{get:()=>t[n],enumerable:!(r=Oe(t,n))||r.enumerable});return e},m=e=>Ye(me(F(e!=null?Ge(Ve(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var xe=Je(le=>{function R(e,t){if(typeof e=="string")return e;if(e){let r,n;if(Array.isArray(e)){for(r=0;r<e.length;r++)if(n=R(e[r],t))return n}else for(r in e)if(t.has(r))return R(e[r],t)}}function v(e,t,r){throw new Error(r?`No known conditions for "${t}" entry in "${e}" package`:`Missing "${t}" export in "${e}" package`)}function ye(e,t){return t===e?".":t[0]==="."?t:t.replace(new RegExp("^"+e+"/"),"./")}function Qe(e,t=".",r={}){let{name:n,exports:o}=e;if(o){let{browser:s,require:l,conditions:a=[]}=r,i=ye(n,t);if(i[0]!=="."&&(i="./"+i),typeof o=="string")return i==="."?o:v(n,i);let d=new Set(["default",...a]);d.add(l?"require":"import"),d.add(s?"browser":"node");let p,b,de=!1;for(p in o){de=p[0]!==".";break}if(de)return i==="."?R(o,d)||v(n,i,1):v(n,i);if(b=o[i])return R(b,d)||v(n,i,1);for(p in o){if(b=p[p.length-1],b==="/"&&i.startsWith(p))return(b=R(o[p],d))?b+i.substring(p.length):v(n,i,1);if(b==="*"&&i.startsWith(p.slice(0,-1))&&i.substring(p.length-1).length>0)return(b=R(o[p],d))?b.replace("*",i.substring(p.length-1)):v(n,i,1)}return v(n,i)}}function Ze(e,t={}){let r=0,n,o=t.browser,s=t.fields||["module","main"];for(o&&!s.includes("browser")&&s.unshift("browser");r<s.length;r++)if(n=e[s[r]]){if(typeof n!="string")if(typeof n=="object"&&s[r]=="browser"){if(typeof o=="string"&&(n=n[o=ye(e.name,o)],n==null))return o}else continue;return typeof n=="string"?"./"+n.replace(/^\.?\//,""):n}}le.legacy=Ze;le.resolve=Qe});me(exports);te(exports,{constants:()=>re,default:()=>Be,utils:()=>$t});var P=m(require("path")),ce=m(require("esbuild"));var $e=m(require("module")),u=m(require("path")),_e=m(require("sass"));var re={};te(re,{BUILD_PATH:()=>B,DOCS_PATH:()=>ne,GENERATED_PAGES_PATH:()=>S,PAGES_PATH:()=>f,SSR_CSS_PATH:()=>ie,SSR_JS_PATH:()=>M,SSR_LICENSE_PATH:()=>oe,TEMPLATE_PATH:()=>W,TEMP_PATH:()=>x,TEMP_SERVER_ENTRY_PATH:()=>j});var y=m(require("path")),W=(0,y.join)(__dirname,"templates"),x=".temp",j=(0,y.join)(".temp","__server__.jsx"),ne=(0,y.join)("docs"),f=(0,y.join)("src","pages"),S=(0,y.join)("src","generated-pages"),M=(0,y.join)("build","__ssr.jsx"),oe=(0,y.join)("build","__ssr.jsx.LEGAL.txt"),ie=(0,y.join)("build","__ssr.css"),B="build";var se={};te(se,{copyDirectoryContent:()=>I,copyFile:()=>L,emptyDirectory:()=>V,ensureDirectory:()=>g,exists:()=>U,isDirectory:()=>O,readDirectory:()=>J,readFile:()=>Y,remove:()=>_,writeFile:()=>w});var c=m(require("fs")),E=m(require("path")),$=(e,t)=>r=>r?t(r):e(),G=e=>new Promise((t,r)=>(0,c.readdir)(e,(n,o)=>n?r(n):t(o))),pe=async e=>Promise.all((await G(e)).flatMap(async t=>{let r=(0,E.join)(e,t);return await O(r)?[r,...await pe(r)]:[r]})).then(t=>t.flat()),I=async(e,t)=>{await g(t),await V(t),await Promise.all((await G(e)).map(async r=>{let n=(0,E.join)(e,r),o=(0,E.join)(t,r);await O(n)?await I(n,o):await L(n,o)}))},L=(e,t)=>new Promise((r,n)=>(0,c.copyFile)(e,t,$(r,n))),V=async e=>{let t=await G(e);await Promise.all(t.map(r=>_((0,E.join)(e,r))))},g=e=>new Promise((t,r)=>(0,c.mkdir)(e,{recursive:!0},$(t,r))),U=e=>new Promise(t=>(0,c.access)(e,void 0,r=>t(r==null))),O=e=>new Promise((t,r)=>(0,c.lstat)(e,(n,o)=>n?r(n):t(o.isDirectory()))),J=async(e,t)=>t?await U(e)?(await pe(e)).map(r=>(0,E.relative)(e,r)).sort((r,n)=>r.localeCompare(n)):[]:G(e),Y=e=>new Promise((t,r)=>(0,c.readFile)(e,(n,o)=>n?r(n):t(o.toString()))),_=e=>new Promise((t,r)=>{c.readFile!=null?(0,c.rm)(e,{recursive:!0,force:!0},$(t,r)):O(e).then(n=>n?(0,c.rmdir)(e,{recursive:!0},$(t,r)):(0,c.unlink)(e,$(t,r))).catch(n=>r(n))}),w=(e,t)=>new Promise((r,n)=>(0,c.writeFile)(e,t,$(r,n)));var we=m(require("@mdx-js/mdx")),be=m(require("remark-slug"));function qe(e){if(e==null)throw new Error(`Value is asserted to be not null, but it is ${e}.`)}var ae=e=>(qe(e),e);var fe=({level:e,label:t})=>`${"#".repeat(e)} ${t}`,ze=e=>{let t=[],r=!1;return e.split(`
`).filter(o=>{if(o.startsWith("```"))r=!r;else return!r}).forEach(o=>{let s=o.trim();if(!s.startsWith("#"))return;let l=0;for(;s[l]==="#";)l+=1;if(l>6)throw new Error(`Invalid Header: '${s}'`);t.push({level:l,label:s.substring(l).trim()})}),t},ge=e=>{let t=ze(e);if(t[0]==null)throw new Error("Lacking title.");if(t[0].level!==1)throw new Error(`First heading must be h1, found: ${fe(t[0])}`);if(t.filter(r=>r.level===1).length>1)throw new Error("More than one h1.");return t},he=(e,t)=>{let r=ae(e[t]),n=[],o=t+1;for(;o<e.length;){let{element:s,level:l,finishedIndex:a}=he(e,o);if(l<=r.level)break;if(l>r.level+1){let i=fe({level:l,label:s.label});throw new Error(`Invalid header: ${i}. Expected Level: ${r.level+1}`)}o=a,n.push(s)}return{element:{label:r.label,children:n},level:r.level,finishedIndex:o}},Xe=e=>{let t=ge(e);return he(t,0).element},Pe=e=>ae(ge(e)[0]).label,q=Xe;var Ke=async(e,t)=>{let r=e.trim().split(`
`).slice(1),n;if(t){let o=r.findIndex(s=>s.trimStart().startsWith("<!--")&&s.includes("truncate"));n=r.slice(0,o).join(`
`)}else n=r.join(`
`);return n=n.trim(),`import React from 'react';
import mdx from 'esbuild-scripts/__internal-components__/mdx';
${await(0,we.default)(n,{remarkPlugins:[be.default]})}
MDXContent.truncated = ${t};
MDXContent.toc = ${JSON.stringify(q(e),void 0,2)};`},D=Ke;var Ee=m(require("fs"));var z=m(require("fs")),h=m(require("path")),X=m(xe()),et=[".tsx",".ts",".jsx",".mjs",".cjs",".js",".json"],tt=/^(\/|\.{1,2}(\/|$))/,rt=/^\.{0,2}\//,nt=(e,t,r)=>{let n=(0,X.resolve)(e,t,{browser:r,require:!r});if(n!=null)return n;let o=(0,X.legacy)(e,r?{browser:r}:{browser:!1,fields:["main","module"]});return typeof o=="string"?t==="."?o:null:o&&(o[t]||o[`${t}.js`]||o[`./${t}`]||o[`./${t}.js`])||null},ot=(e,t)=>{let r=(0,h.normalize)(e),n=(0,h.normalize)(t);return r===n?".":(r.endsWith(h.sep)||(r=r+h.sep),n.startsWith(r)?n.slice(r.length):null)},it=(e,t,r)=>{let n=t.findPackageLocator((0,h.join)(e,"internal.js"));if(n==null)throw new Error;let{packageLocation:o}=t.getPackageInformation(n),s=(0,h.join)(o,"package.json");if(!z.existsSync(s))return null;let l=JSON.parse(z.readFileSync(s,"utf8")),a=ot(o,e);if(a==null)throw new Error;rt.test(a)||(a=`./${a}`),a=(0,h.normalize)(a);let i=nt(l,a,r);return i!=null?(0,h.join)(o,i):null},st=(e,t,r,n)=>{if(tt.test(e))return t;let o=it(t,r,n);return o?(0,h.normalize)(o):t},at=(e,t,r,n)=>{let o=r.resolveToUnqualified(e,t);return o==null?null:r.resolveUnqualified(st(e,o,r,n),{extensions:et})},Se=at;var ve=/()/,lt=()=>({name:"esbuild-scripts-esbuild-plugin-pnp",setup(e){let{findPnpApi:t}=require("module");if(typeof t=="undefined")return;let r=process.cwd();e.onResolve({filter:ve},async n=>{let o=n.importer?n.importer:`${r}/`,s=t(o);if(!s)return;let l=n.path.lastIndexOf("?"),a=l===-1?n.path:n.path.substring(0,l),i=Se(a,o,s,e.initialOptions.platform!=="node");return i==null?{external:!0}:{namespace:"pnp",path:`${i}${l===-1?"":n.path.substring(l)}`}}),e.onLoad!==null&&e.onLoad({filter:ve},async n=>({contents:await Ee.promises.readFile(n.path,"utf8"),loader:"default"}))}}),Te=lt;var ct={name:"WebAppResolvePlugin",setup(e){e.onResolve({filter:/^data:/},()=>({external:!0})),e.onResolve({filter:/^esbuild-scripts-internal\/docs\//},t=>({path:(0,u.resolve)((0,u.join)(ne,(0,u.relative)((0,u.join)("esbuild-scripts-internal","docs"),t.path)))})),e.onResolve({filter:/^esbuild-scripts-internal\/page\//},async t=>{let r=(0,u.relative)((0,u.join)("esbuild-scripts-internal","page"),t.path),n=[(0,u.join)(f,`${r}.js`),(0,u.join)(f,`${r}.jsx`),(0,u.join)(f,`${r}.ts`),(0,u.join)(f,`${r}.tsx`),(0,u.join)(S,`${r}.js`),(0,u.join)(S,`${r}.jsx`),(0,u.join)(S,`${r}.ts`),(0,u.join)(S,`${r}.tsx`)];for(let o of n)if(await U(o))return{path:(0,u.resolve)(o)};throw new Error(`Cannot found page at ${r}. Candidates considered:
${n.join(`
`)}`)})}},ut={name:"sass",setup(e){e.onResolve({filter:/.\.(scss|sass)$/},async t=>t.path.startsWith(".")?{path:(0,u.resolve)((0,u.dirname)(t.importer),t.path)}:{path:(0,$e.createRequire)(t.importer).resolve(t.path)}),e.onLoad({filter:/.\.(scss|sass)$/},async t=>{let{css:r}=await new Promise((n,o)=>{(0,_e.render)({file:t.path},(s,l)=>{s?o(s):n(l)})});return{contents:r.toString(),loader:"css",watchFiles:[t.path]}})}},dt={name:"mdx",setup(e){e.onLoad({filter:/\.md\?truncated=true$/},async t=>({contents:await D(await Y(t.path.substring(0,t.path.lastIndexOf("?"))),!0),loader:"jsx"})),e.onLoad({filter:/\.md$/},async t=>({contents:await D(await Y(t.path),!1),loader:"jsx"}))}},mt=[ct,ut,dt,Te()],Re=mt;var pt=({isServer:e=!1,isProd:t=!1})=>({define:{__dirname:'""',__SERVER__:String(e),"process.env.NODE_ENV":t?'"production"':'"development"'},bundle:!0,minify:!1,legalComments:"linked",platform:"browser",target:"es2019",logLevel:"error",plugins:Re}),N=pt;var k=m(require("path"));var ke="// @generated",Ae=e=>e.endsWith("index")?e.substring(0,e.length-(e.endsWith("/index")?6:5)):e,ft=(e,t)=>{let r=Ae(e),n=t.filter(i=>i!==e),o=n.map(Ae),s=n.map((i,d)=>`const Component${d} = lazy(() => import('esbuild-scripts-internal/page/${i}'));`).join(`
`),l=o.map((i,d)=>`<Route exact path="/${i}"><Suspense fallback={null}><Component${d} /></Suspense></Route>`).join(""),a=`<Switch><Route exact path="/${r}"><Page /></Route>${l}</Switch>`;return`${ke}
import React,{Suspense,lazy} from 'react';
import {hydrate,render} from 'react-dom';
import {BrowserRouter,Route,Switch} from 'esbuild-scripts/__internal-components__/react-router';
import Document from 'esbuild-scripts-internal/page/_document';
import Page from 'esbuild-scripts-internal/page/${e}';
${s}
const element = <BrowserRouter><Document>${a}</Document></BrowserRouter>;const rootElement = document.getElementById('root');
if (rootElement.hasChildNodes()) hydrate(element, rootElement); else render(element, rootElement);
`},gt=e=>`${ke}
import React from 'react';
import {renderToString} from 'react-dom/server';
import Helmet from 'esbuild-scripts/components/Head';
import {StaticRouter} from 'esbuild-scripts/__internal-components__/react-router';
import Document from 'esbuild-scripts-internal/page/_document';
${e.map((t,r)=>`import Page${r} from 'esbuild-scripts-internal/page/${t}';`).join(`
`)}
const map = { ${e.map((t,r)=>`'${t}': Page${r}`).join(", ")} };
module.exports = (path) => ({
  divHTML: renderToString(
    <StaticRouter location={'/'+path}>
      <Document>{React.createElement(map[path])}</Document>
    </StaticRouter>
  ),
  noJS: map[path].noJS,
  helmet: Helmet.renderStatic(),
});
`,ht=async()=>{await g(f);let[e,t]=await Promise.all([J(f,!0),J(S,!0)]);return[...e,...t].map(n=>{switch((0,k.extname)(n)){case".js":case".jsx":case".ts":case".tsx":break;default:return null}return n.substring(0,n.lastIndexOf("."))}).filter(n=>n!=null&&!n.startsWith("_document"))},K=async()=>{let e=await ht();return await g(x),await V(x),await Promise.all([...e.map(async t=>{let r=(0,k.join)(x,`${t}.jsx`);await g((0,k.dirname)(r)),await w(r,ft(t,e))}),w(j,gt(e))]),e};var Pt=(e,t)=>t?`<script type="module" src="/${e}"></script>`:`<script src="/${e}"></script>`,wt=(e,t)=>`<link rel="${t?"modulepreload":"preload"}" href="/${e}" />`,bt=(e,t,r)=>{let n=[],o=[];e.forEach(a=>{!r&&a.endsWith("js")?n.push(a):a.endsWith("css")&&o.push(a)});let s=o.map(a=>`<link rel="stylesheet" href="/${a}" />`).join("")+n.map(a=>wt(a,t)).join(""),l=n.map(a=>Pt(a,t)).join("");return{headLinks:s,bodyScriptLinks:l}},He=(e,t)=>t==null?`<head>${e}</head>`:`<head>${[t.meta.toString(),t.title.toString(),t.link.toString(),t.script.toString(),e].join("")}</head>`,yt=(e,t,r)=>{let{headLinks:n,bodyScriptLinks:o}=bt(t,r,e==null?void 0:e.noJS);if(e==null){let d=He(n),p=`<body><div id="root"></div>${o}</body>`;return`<!DOCTYPE html><html>${d}${p}</html>`}let{divHTML:s,helmet:l}=e,a=He(n,l),i=`<body><div id="root">${s}</div>${o}</body>`;return`<!DOCTYPE html><html ${l.htmlAttributes.toString()}>${a}${i}</html>`},Q=yt;var A=e=>process.stderr.isTTY?t=>`[${e}m${t}[0m`:t=>t,H=A(31),C=A(32),Ce=A(33),Z=A(34),Qt=A(35),Zt=A(36);var je=async e=>{let{outputFiles:t}=await(0,ce.build)({...N({isProd:!0}),entryPoints:e.map(n=>(0,P.join)(x,`${n}.jsx`)),assetNames:"assets/[name]-[hash]",chunkNames:"chunks/[name]-[hash]",entryNames:"[dir]/[name]-[hash]",minify:!0,format:"esm",splitting:!0,write:!1,outdir:"build"}),r=(0,P.resolve)("build");return await Promise.all(t.map(async n=>{await g((0,P.dirname)(n.path)),await w(n.path,n.contents)})),t.map(({path:n})=>(0,P.relative)(r,n))},xt=async()=>{await(0,ce.build)({...N({isServer:!0,isProd:!0}),entryPoints:[j],platform:"node",format:"cjs",outfile:M});try{return require((0,P.resolve)(M))}catch(e){return console.error(H("Unable to perform server side rendering since the server bundle is not correctly generated.")),console.error(H(e)),null}finally{await Promise.all([_(M),_(oe),_(ie)])}},St=async e=>{let t=new Date().getTime();console.error(Ce("[i] Bundling..."));let r=await K();await I("public","build");let n,o;if(e){if([n,o]=await Promise.all([je(r),xt()]),o==null)return!1}else n=await je(r),o=null;let s=r.map(a=>{let i=n.filter(p=>p.startsWith("chunk")||p.startsWith(a)),d=Q(o==null?void 0:o(a),i,!0);return{entryPoint:a,html:d}});await Promise.all(s.map(async({entryPoint:a,html:i})=>{let d;a.endsWith("index")?d=(0,P.join)(B,`${a}.html`):d=(0,P.join)(B,a,"index.html"),await g((0,P.dirname)(d)),await w(d,i)}));let l=new Date().getTime()-t;return console.error(`\u26A1 ${C(`Build success in ${l}ms.`)}`),!0},ue=St;var T=m(require("path"));var Et=async()=>{await g(f),await Promise.all([L((0,T.join)(W,"_document.tsx"),(0,T.join)(f,"_document.tsx")),L((0,T.join)(W,"index.tsx"),(0,T.join)(f,"index.tsx")),w((0,T.join)(f,"index.css"),""),w((0,T.join)("src","types.d.ts"),`/// <reference types="esbuild-scripts" />
`),g("public")]),console.error(C("esbuild-scripts app initialized."))},Me=Et;var ee=m(require("http")),Le=m(require("path")),De=m(require("esbuild"));var vt=(e,t)=>{if(t==null||!t.startsWith("/"))return;let r=t.substring(1);return e.find(n=>n.endsWith("index")?[n,n.substring(0,n.length-5)].includes(r):n===r)},Ne=e=>Q(void 0,[`${e}.js`,`${e}.css`],!1),Tt=async()=>{let e=await K(),t=await(0,De.serve)({servedir:"public",port:19815},{...N({}),entryPoints:e.map(n=>(0,Le.join)(x,`${n}.jsx`)),sourcemap:"inline",outdir:"public"}),r=(0,ee.createServer)((n,o)=>{let s=vt(e,n.url);if(s!=null){o.writeHead(200,{"Content-Type":"text/html"}),o.end(Ne(s));return}let l={hostname:t.host,port:t.port,path:n.url,method:n.method,headers:n.headers},a=(0,ee.request)(l,i=>{if(i.statusCode===404){o.writeHead(200,{"Content-Type":"text/html"}),o.end(Ne("index"));return}o.writeHead(i.statusCode||200,i.headers),i.pipe(o,{end:!0})});n.pipe(a,{end:!0})}).listen(3e3);console.error(`${C("Serving at")} ${Z("http://localhost:3000")}`),await t.wait,r.close()},Fe=Tt;var $t={...se,parseMarkdownHeaderTree:q,parseMarkdownTitle:Pe,compileMarkdownToReact:D};function We(){console.error(Z("Usage:")),console.error("- esbuild-script start: start the devserver."),console.error("- esbuild-script build: generate production build."),console.error("- esbuild-script ssg: generate static site."),console.error("- esbuild-script ssg --no-js: generate static site without JS."),console.error("- esbuild-script help: display command line usages.")}async function _t(){let e=process.argv[2]||"";switch(e){case"init":return await Me(),!0;case"start":return await Fe(),!0;case"ssg":return ue(!0);case"build":return ue(!1);case"help":case"--help":return We(),!0;default:return console.error(H(`Unknown command: '${e}'`)),We(),!1}}async function Be(e){e&&await e();try{await _t()||(process.exitCode=1)}catch(t){console.error(H(t)),process.exitCode=1}}0&&(module.exports={constants,utils});
})();
