module.exports=(()=>{"use strict";var __webpack_modules__={167:function(__unused_webpack_module,exports,__webpack_require__){var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,o){if(o===undefined)o=n;Object.defineProperty(e,o,{enumerable:true,get:function(){return t[n]}})}:function(e,t,n,o){if(o===undefined)o=n;e[o]=t[n]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))__createBinding(t,e,n);__setModuleDefault(t,e);return t};Object.defineProperty(exports,"__esModule",{value:true});exports.createTypeScriptCodegenService=exports.createJsonCodegenService=exports.CodegenRealFilesystem=exports.CodegenInMemoryFilesystem=void 0;const fs_1=__webpack_require__(747);const path_1=__webpack_require__(622);const TypeScript=__importStar(__webpack_require__(34));class CodegenInMemoryFilesystem{constructor(e){this.files=new Map(e)}fileExists(e){return this.files.has(e)}readFile(e){const t=this.files.get(e);if(t==null)throw new Error(`No such file: ${e}`);return t}writeFile(e,t){this.files.set(e,t)}deleteFile(e){this.files.delete(e)}}exports.CodegenInMemoryFilesystem=CodegenInMemoryFilesystem;exports.CodegenRealFilesystem={fileExists:e=>fs_1.existsSync(e),readFile:e=>fs_1.readFileSync(e).toString(),writeFile:(e,t)=>{fs_1.mkdirSync(path_1.dirname(e),{recursive:true});fs_1.writeFileSync(e,t)},deleteFile:e=>fs_1.unlinkSync(e)};exports.createJsonCodegenService=((e,t,n)=>({name:e,sourceFileIsRelevant:t,run:(e,t)=>n(e,JSON.parse(t))}));exports.createTypeScriptCodegenService=((name,sourceFileIsRelevant,run)=>({name:name,sourceFileIsRelevant:sourceFileIsRelevant,run:(sourceFilename,source)=>{const transpiledModuleCode=TypeScript.transpile(source,{module:TypeScript.ModuleKind.CommonJS});const wrappedModuleCodeForEval=`((exports) => {\n      ${transpiledModuleCode}\n\n      return exports.default;\n    })({})`;const evaluatedSource=eval(wrappedModuleCodeForEval);return run(sourceFilename,evaluatedSource)}}))},272:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.githubActionWorkflowToString=t.githubActionJobRunStep=t.githubActionJobActionStep=void 0;t.githubActionJobActionStep=((e,t={})=>({type:"use-action",actionName:e,actionArguments:t}));t.githubActionJobRunStep=((e,t)=>({type:"run",stepName:e,command:t}));const n=e=>{switch(e.type){case"use-action":{const t=`      - uses: ${e.actionName}\n`;if(Object.keys(e.actionArguments).length===0){return t}const n=Object.entries(e.actionArguments).map(([e,t])=>{const n=t.split("\n");if(n.length===1){return`          ${e}: ${n[0]}`}return`          ${e}: |\n${n.map(e=>`            ${e}`).join("\n")}`}).join("\n");return`${t}        with:\n${n}\n`}case"run":{const t=`      - name: ${e.stepName}\n`;const n=e.command.split("\n");if(n.length===1){return`${t}        run: ${n[0]}\n`}return`${t}        run: |\n${n.map(e=>`          ${e}\n`).join("")}`}default:throw new Error}};const o=({jobName:e,jobSteps:t})=>{return`  ${e}:\n    runs-on: ubuntu-latest\n    steps:\n${t.map(n).join("")}`};t.githubActionWorkflowToString=(({workflowName:e,workflowtrigger:{triggerPaths:t,masterBranchOnly:n},workflowSecrets:r=[],workflowJobs:i})=>{const s=`# @generated\n\nname: ${e}\non:\n  push:\n    paths:\n${t.map(e=>`      - '${e}'\n`).join("")}${n?`    branches:\n      - master\n`:""}${r.length>0?`env:\n${r.map(e=>`  ${e}: \${{ secrets.${e} }}`).join("\n")}\n`:""}\njobs:\n${i.map(o).join("")}`;return s})},328:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});t.GITHUB_ACTIONS_USE_YARN_CACHE_STEP=t.GITHUB_ACTIONS_SETUP_NODE_STEP=t.GITHUB_ACTIONS_CHECKOUT_STEP=void 0;const o=n(272);t.GITHUB_ACTIONS_CHECKOUT_STEP=o.githubActionJobActionStep("actions/checkout@v2");t.GITHUB_ACTIONS_SETUP_NODE_STEP=o.githubActionJobActionStep("actions/setup-node@v2-beta");t.GITHUB_ACTIONS_USE_YARN_CACHE_STEP=o.githubActionJobActionStep("actions/cache@v2",{path:".yarn/cache\n.pnp.js",key:"yarn-berry-${{ hashFiles('**/yarn.lock') }}","restore-keys":"yarn-berry-"})},843:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});t.getYarnWorkspaceWorkflows=t.yarnWorkspaceBoilterplateSetupSteps=void 0;const o=n(747);const r=n(622);const i=n(272);const s=n(328);t.yarnWorkspaceBoilterplateSetupSteps=[s.GITHUB_ACTIONS_CHECKOUT_STEP,s.GITHUB_ACTIONS_SETUP_NODE_STEP,s.GITHUB_ACTIONS_USE_YARN_CACHE_STEP,i.githubActionJobRunStep("Yarn Install","yarn install --immutable")];t.getYarnWorkspaceWorkflows=(e=>{const n=t=>{var n,i;return((i=(n=JSON.parse(o.readFileSync(r.join(e.information[t].workspaceLocation,"package.json")).toString()))===null||n===void 0?void 0:n.scripts)===null||i===void 0?void 0:i.deploy)!=null};return Object.fromEntries([...e.topologicallyOrdered.filter(n).map(n=>{const o=`cd-${n}`;return[o,{workflowName:`CD ${n}`,workflowtrigger:{triggerPaths:[...e.information[n].dependencyChain.map(t=>`${e.information[t].workspaceLocation}/**`),"configuration/**",`.github/workflows/generated-*-${n}.yml`],masterBranchOnly:true},workflowSecrets:["FIREBASE_TOKEN"],workflowJobs:[{jobName:"deploy",jobSteps:[...t.yarnWorkspaceBoilterplateSetupSteps,i.githubActionJobRunStep("Build",`yarn workspace ${n} build`),i.githubActionJobRunStep("Install firebase-tools","sudo npm install -g firebase-tools"),i.githubActionJobRunStep("Deploy",`yarn workspace ${n} deploy`)]}]}]})])})},24:(e,t,n)=>{const o=n(272);const r=n(328);const i=n(843);const s=n(167);const a=()=>["general",{workflowName:"General",workflowtrigger:{triggerPaths:["**"],masterBranchOnly:false},workflowJobs:[{jobName:"lint",jobSteps:[...i.yarnWorkspaceBoilterplateSetupSteps,o.githubActionJobRunStep("Check Codegen","yarn codegen"),o.githubActionJobRunStep("Check changed","if [[ `git status --porcelain` ]]; then exit 1; fi"),o.githubActionJobRunStep("Format Check","yarn format:check"),o.githubActionJobRunStep("Lint","yarn lint")]},{jobName:"build",jobSteps:[o.githubActionJobActionStep("actions/checkout@v2",{"fetch-depth":"2"}),r.GITHUB_ACTIONS_SETUP_NODE_STEP,r.GITHUB_ACTIONS_USE_YARN_CACHE_STEP,o.githubActionJobRunStep("Yarn Install","yarn install --immutable"),o.githubActionJobRunStep("Build","yarn compile")]},{jobName:"test",jobSteps:[...i.yarnWorkspaceBoilterplateSetupSteps,o.githubActionJobRunStep("Test","yarn test")]}]}];const c=s.createJsonCodegenService("GitHub Actions Workflows Codegen",e=>e==="workspaces.json",(e,t)=>{return[a(),...Object.entries(i.getYarnWorkspaceWorkflows(t))].map(([e,t])=>({outputFilename:`.github/workflows/generated-${e}.yml`,outputContent:o.githubActionWorkflowToString(t)}))});const u={name:"Ignore Files Codegen",sourceFileIsRelevant:e=>e===".gitignore",run:(e,t)=>{const n=`# ${"@"+"generated"}\n\n${t}\n\n# additions\n.yarn\n**/bin/`;return[{outputFilename:".eslintignore",outputContent:n},{outputFilename:".prettierignore",outputContent:n}]}};const l=[c,u];e.exports=l},747:e=>{e.exports=require("fs")},622:e=>{e.exports=require("path")},34:e=>{e.exports=require("typescript")}};var __webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e]){return __webpack_module_cache__[e].exports}var t=__webpack_module_cache__[e]={exports:{}};var n=true;try{__webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__);n=false}finally{if(n)delete __webpack_module_cache__[e]}return t.exports}__webpack_require__.ab=__dirname+"/";return __webpack_require__(24)})();