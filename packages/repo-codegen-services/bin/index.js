module.exports=(()=>{"use strict";var __webpack_modules__={888:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:true});exports.createJSCodegenService=exports.createJsonCodegenService=void 0;exports.createJsonCodegenService=((e,t,o)=>({name:e,sourceFileIsRelevant:t,run:(e,t)=>o(e,JSON.parse(t))}));exports.createJSCodegenService=((name,sourceFileIsRelevant,run)=>({name:name,sourceFileIsRelevant:sourceFileIsRelevant,run:(sourceFilename,source)=>{const wrappedModuleCodeForEval=`((exports) => { ${source} return exports; })({})`;const evaluatedSource=eval(wrappedModuleCodeForEval);return run(sourceFilename,evaluatedSource)}}))},272:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.githubActionWorkflowToString=t.githubActionJobRunStep=t.githubActionJobActionStep=void 0;t.githubActionJobActionStep=((e,t={})=>({type:"use-action",actionName:e,actionArguments:t}));t.githubActionJobRunStep=((e,t)=>({type:"run",stepName:e,command:t}));const o=e=>{switch(e.type){case"use-action":{const t=`      - uses: ${e.actionName}\n`;if(Object.keys(e.actionArguments).length===0){return t}const o=Object.entries(e.actionArguments).map(([e,t])=>{const o=t.split("\n");if(o.length===1){return`          ${e}: ${o[0]}`}return`          ${e}: |\n${o.map(e=>`            ${e}`).join("\n")}`}).join("\n");return`${t}        with:\n${o}\n`}case"run":{return`      - name: ${e.stepName}\n        run: ${e.command}\n`}}};const n=({jobName:e,jobSteps:t})=>{return`  ${e}:\n    runs-on: ubuntu-latest\n    steps:\n${t.map(o).join("")}`};t.githubActionWorkflowToString=(({workflowName:e,workflowtrigger:{triggerPaths:t,masterBranchOnly:o},workflowJobs:r})=>{const a=`# @${"generated"}\n\nname: ${e}\non:\n  push:\n    paths:\n${t.map(e=>`      - '${e}'\n`).join("")}${o?`    branches:\n      - master\n`:""}\njobs:\n${r.map(n).join("")}`;return a})},202:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:true});t.getYarnWorkspaceWorkflows=void 0;const n=o(747);const r=o(622);const a=o(272);const i=o(888);const s=a.githubActionJobActionStep("actions/checkout@v2");const c=a.githubActionJobActionStep("actions/setup-node@v2-beta");const u=a.githubActionJobActionStep("actions/cache@v2",{path:".yarn/cache\n.pnp.js",key:"yarn-berry-${{ hashFiles('**/yarn.lock') }}","restore-keys":"yarn-berry-"});const l=[s,c,u,a.githubActionJobRunStep("Yarn Install","yarn install --immutable")];const p=(e,t,o)=>{var a,i;return((i=(a=JSON.parse(n.readFileSync(r.join(e.information[t].workspaceLocation,"package.json")).toString()))===null||a===void 0?void 0:a.scripts)===null||i===void 0?void 0:i[o])!=null};const b=()=>["general",{workflowName:"General",workflowtrigger:{triggerPaths:["**"],masterBranchOnly:false},workflowJobs:[{jobName:"lint",jobSteps:[...l,a.githubActionJobRunStep("Format Check","yarn format:check"),a.githubActionJobRunStep("Lint","yarn lint")]},{jobName:"build",jobSteps:[a.githubActionJobActionStep("actions/checkout@v2",{"fetch-depth":"2"}),c,u,a.githubActionJobRunStep("Yarn Install","yarn install --immutable"),a.githubActionJobRunStep("Build","yarn compile")]},{jobName:"validate",jobSteps:[...l,a.githubActionJobRunStep("Check Codegen","yarn codegen"),a.githubActionJobRunStep("Check changed","if [[ `git status --porcelain` ]]; then exit 1; fi")]},{jobName:"test",jobSteps:[...l,a.githubActionJobRunStep("Test","yarn test")]}]}];t.getYarnWorkspaceWorkflows=(e=>e.topologicallyOrdered.filter(t=>p(e,t,"deploy")).map(t=>{const o=`cd-${t}`;return[o,{workflowName:`CD ${t}`,workflowtrigger:{triggerPaths:[...e.information[t].dependencyChain.map(t=>`${e.information[t].workspaceLocation}/**`),"configuration/**",`.github/workflows/generated-*-${t}.yml`],masterBranchOnly:true},workflowJobs:[{jobName:"deploy",jobSteps:[...l,a.githubActionJobRunStep("Build",`yarn workspace ${t} build`),a.githubActionJobRunStep("Install firebase-tools","sudo npm install -g firebase-tools"),a.githubActionJobRunStep("Deploy",`FIREBASE_TOKEN=\${{ secrets.FIREBASE_TOKEN }} yarn workspace ${t} deploy`)]}]}]}));const _=i.createJsonCodegenService("GitHub Actions Workflows Codegen",e=>e==="workspaces.json",(e,o)=>{return[b(),...t.getYarnWorkspaceWorkflows(o)].map(([e,t])=>({outputFilename:`.github/workflows/generated-${e}.yml`,outputContent:a.githubActionWorkflowToString(t)}))});t.default=_},24:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const r=n(o(202));const a={name:"Ignore Files Codegen",sourceFileIsRelevant:e=>e===".gitignore",run:(e,t)=>{const o=`# @${"generated"}\n\n${t}\n# additions\n.yarn\n**/bin/\n**/out/\n**/build/\n**/dist/\n`;return[{outputFilename:".eslintignore",outputContent:o},{outputFilename:".prettierignore",outputContent:o}]}};const i=[r.default,a];e.exports=i},747:e=>{e.exports=require("fs")},622:e=>{e.exports=require("path")}};var __webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e]){return __webpack_module_cache__[e].exports}var t=__webpack_module_cache__[e]={exports:{}};var o=true;try{__webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__);o=false}finally{if(o)delete __webpack_module_cache__[e]}return t.exports}__webpack_require__.ab=__dirname+"/";return __webpack_require__(24)})();